---
layout: "layouts/layout.html"
title: "Archives"
---

<h1>Archives</h1>

<section class="archives-years">
	<ul>
		{% for year in collections.archives %}
			<li><a href="#{{ year.year }}">{{ year.year }}</a></li>
		{% endfor %}
	</ul>
</section>

<section class="filter">
	<label for="filter">
		Filter
		<input type="text" name="filter" id="filter" />
	</label>
	<button type="button" id="clear-filters" class="btn-primary">Clear</button>
</section>

<section class="archives">
	{% for year in collections.archives %}
		<div class="archive-year">
			<h2 id="{{ year.year }}">{{ year.year }}</h2>

			<ul class="archives-list">
				{% for post in year.posts %}
					<li>
						<a href="{{ post.url }}">{{ post.title }}</a>
						<div class="post-metadata">
							<span class="tag {{ post.type.css }}">{{ post.type.name }}</span>
							<span class="date">{{ post.dateString }}</span>
						</div>
					</li>
				{% endfor %}
			</ul>
		</div>
	{% endfor %}
</section>

<script>
	addEventListener('DOMContentLoaded', () => {
		document.getElementById('filter').addEventListener('keyup', function (e) {
			filterItems(e.target.value);
		});

		document.getElementById('clear-filters').addEventListener('click', function () {
			document.getElementById('filter').value = '';
			clearFilters();
		});
	});

	function filterItems(val) {
		if (val.trim().length === 0) {
			clearFilters();
			return;
		}

		document.querySelectorAll('.archives-list li').forEach((x, idx) => {
			if (x.querySelector('a')?.textContent.toLowerCase().includes(val.toLowerCase())) {
				x.removeAttribute('hidden');
			} else {
				x.setAttribute('hidden', true);
			}
		});
	}

	function clearFilters() {
		document.querySelectorAll('.archives-list li').forEach((x) => {
			x.removeAttribute('hidden');
		});
	}
</script>